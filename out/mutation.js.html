<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: mutation.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: mutation.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * Returns a new population, some individuals will have modified points, but all will have a new point.
 * @param {*} population
 * @returns - a copy of the population
 */
function mutation(population) {
	const copyPopulation = population.slice();
	for (let i = 0; i &lt; population.length; i++) {
		// There is a probability that one point of an individual will change
		var randomNumber = Math.floor(Math.random() * 100) + 1;
		if (randomNumber &lt;= mutatePercentage) {
			for (let p = 0; p &lt; copyPopulation[i].length; p++) {
				let point = copyPopulation[i][p];
				const improvedCoordinates = approximateCoordinate(point.x, point.y);
				const newCoordinatesPoint = new cv.Point(improvedCoordinates.x, improvedCoordinates.y);
				copyPopulation[i][p] = newCoordinatesPoint;
			}
		}
		// Add one point to each individual in the population
		if (copyPopulation[i].length &lt;= maxPoints) {
			const pointX = Math.floor(Math.random() * (image_elem.width - 0 + 1)) + 0;
			const pointY = Math.floor(Math.random() * (image_elem.height - 0 + 1)) + 0;
			const p1 = new cv.Point(pointX, pointY);
			copyPopulation[i].push(p1);
		}
	}
	return copyPopulation
}

/**
 * Returns the coordinates of the nearest point of the given point.
 * @param {number} targetX
 * @param {number} targetY
 * @returns {number} nearbyPoint
 */
function approximateCoordinate(targetX, targetY) {
	const target = cv.imread(image_elem);

	let gray = new cv.Mat();
	cv.cvtColor(target, gray, cv.COLOR_RGBA2GRAY);

	let binary = new cv.Mat();
	cv.threshold(gray, binary, 0, 255, cv.THRESH_BINARY_INV | cv.THRESH_OTSU);

	let minDistance = Infinity;
	let nearbyPoint = null;
	for (let y = 0; y &lt; binary.rows; y++) {

		for (let x = 0; x &lt; binary.cols; x++) {

			let pixelValue = binary.ucharPtr(y, x)[0];
			if (pixelValue == 0) {
				//super formula
				let distance = Math.sqrt(Math.pow(x - targetX, 2) + Math.pow(y - targetY, 2));

				if (distance &lt; minDistance) {
					minDistance = distance;
					nearbyPoint = { x, y };
				}
			}
		}
	}
	return nearbyPoint;
}</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#approximateCoordinate">approximateCoordinate</a></li><li><a href="global.html#mutation">mutation</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.2</a> on Wed Nov 15 2023 18:39:48 GMT-0600 (Central Standard Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
